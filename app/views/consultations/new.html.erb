<!-- ver app/assets/stylesheets/pages/_schedule -->

<div style="background-color: #f7fafc; height: 100%">
  <div style="padding-top: 20px"  >
    <!--     <div class = "hello text-left">
    <h2> Olá, <%= @user.first_name %> <%= @user.last_name %>!</h2>
    </div> -->
    <div class = "info-box" style="background-color: #fff">
      <div class = "doc-information shadow-sm p-3 mb-5 bg-light rounded">
        <% date = Date.parse(params[:consultation]["start_time"]) %>
        <h3> O Dr(a). <strong><%= @doctor.user.first_name %> <%= @doctor.user.last_name %> </strong> possui os seguintes horários disponíveis para o dia <strong> <%= date.day%>/<%= date.month%>/<%= date.year%> </strong> pelo valor correspondente a <strong><%= humanized_money_with_symbol(@doctor.price) %></strong>.</h3>
      </div>
      <div class = "schedule">
        <div class="row align-middle">
          <% @consultations = @consultations.where("CAST(start_time AS DATE) = ?", date.to_s) %>
          <% 24.times do |number| %>
          <% if check_avaiability(@consultations, number) %>
          <% time = Time.parse("#{sprintf '%02d',(number*30)/60}:#{sprintf '%02d', (number*30)%60}") %>
          <% dtime = DateTime.new(date.year, date.month, date.day, time.hour, time.min, time.sec, time.zone) %>
          <%= link_to doctor_consultations_path(consultation: {doctor_id: @doctor.id, patient_id: current_user.id, price_cents: @doctor.price, start_time: dtime}), method: :post do %>
          <div class = "style-horario btn-branco-peq">
            <%= "#{sprintf '%02d',(number*30)/60}:#{sprintf '%02d', (number*30)%60}" %> - <%= "#{sprintf '%02d', ((number+1)*30)/60}:#{sprintf '%02d', ((number+1)*30)%60}" %>
          </div>
          <%# number %>
          <% end %>
          <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <div class="col-sm-offset-4 col-sm-4"> -->
